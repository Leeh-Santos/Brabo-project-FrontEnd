<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BRABO - Designing with balance, love and care.</title>
    <script src="https://cdn.ethers.io/lib/ethers-5.7.2.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0f0f1a;
            color: #fff;
            overflow-x: hidden;
            line-height: 1.6;
            min-height: 100vh;
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 2rem 4rem;
            z-index: 1000;
            backdrop-filter: blur(20px);
            background: rgba(15, 15, 26, 0.8);
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .nav-menu {
            display: flex;
            gap: 3rem;
            align-items: center;
        }

        .nav-link {
            color: #8b8b9a;
            text-decoration: none;
            font-size: 0.95rem;
            transition: color 0.3s ease;
        }

        .nav-link:hover {
            color: #fff;
        }

        .connect-wallet-btn {
            background: #7c3aed;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .connect-wallet-btn:hover {
            background: #6d28d9;
            transform: translateY(-1px);
        }

        .connected {
            background: transparent;
            border: 1px solid #7c3aed;
        }

        /* Hero Section */
        .hero {
            padding: 10rem 4rem 6rem;
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
        }

        .hero-content {
            max-width: 600px;
        }

        .hero h1 {
            font-size: 3.5rem;
            font-weight: 600;
            line-height: 1.2;
            margin-bottom: 1.5rem;
            letter-spacing: -1px;
        }

        .hero-subtitle {
            font-size: 1.1rem;
            color: #8b8b9a;
            margin-bottom: 3rem;
            line-height: 1.8;
        }

        .cta-button {
            background: #7c3aed;
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .cta-button:hover {
            background: #6d28d9;
            transform: translateY(-2px);
        }

        /* Floating Elements */
        .floating-elements {
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 600px;
            height: 600px;
        }

        .blob {
            position: absolute;
            background: linear-gradient(135deg, #7c3aed, #a855f7);
            filter: blur(60px);
            opacity: 0.5;
            border-radius: 50%;
            animation: float 20s infinite ease-in-out;
        }

        .blob1 {
            width: 400px;
            height: 400px;
            top: 0;
            right: 0;
        }

        .blob2 {
            width: 300px;
            height: 300px;
            bottom: 0;
            left: 0;
            background: linear-gradient(135deg, #3b82f6, #06b6d4);
            animation-delay: -5s;
        }

        @keyframes float {
            0%, 100% {
                transform: translate(0, 0) scale(1);
            }
            33% {
                transform: translate(30px, -30px) scale(1.1);
            }
            66% {
                transform: translate(-20px, 20px) scale(0.9);
            }
        }

        .floating-card {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }

        .floating-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.4);
        }

        .card-funding {
            top: 20%;
            right: 10%;
            width: 200px;
        }

        .card-nft {
            bottom: 20%;
            right: 30%;
            width: 180px;
        }

        .card-rewards {
            top: 40%;
            left: 20%;
            width: 220px;
        }

        .card-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #7c3aed, #a855f7);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .card-value {
            font-size: 1.5rem;
            color: #7c3aed;
            font-weight: 700;
        }

        /* Features Grid */
        .features {
            padding: 6rem 4rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 4rem;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 2.5rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, transparent, rgba(124, 58, 237, 0.1));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            border-color: rgba(124, 58, 237, 0.3);
        }

        .feature-card:hover::before {
            opacity: 1;
        }

        .feature-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #7c3aed, #a855f7);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin-bottom: 1.5rem;
        }

        .feature-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .feature-description {
            color: #8b8b9a;
            line-height: 1.8;
        }

        /* Fund Section */
        .fund-section {
            padding: 4rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .fund-container {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            padding: 3rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .input-wrapper {
            margin-bottom: 2rem;
        }

        .input-label {
            display: block;
            margin-bottom: 0.75rem;
            color: #8b8b9a;
            font-size: 0.9rem;
        }

        .eth-input {
            width: 100%;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1rem 1.5rem;
            color: white;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .eth-input:focus {
            outline: none;
            border-color: #7c3aed;
            box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.1);
        }

        .preview-card {
            background: rgba(124, 58, 237, 0.1);
            border: 1px solid rgba(124, 58, 237, 0.3);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .preview-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .preview-item:last-child {
            margin-bottom: 0;
        }

        .preview-value {
            font-weight: 600;
            color: #a855f7;
        }

        /* NFT Showcase */
        .nft-showcase {
            padding: 4rem;
            max-width: 1400px;
            margin: 0 auto;
            text-align: center;
        }

        .nft-tiers {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .nft-tier {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 2rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nft-tier::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: rotate(45deg);
            transition: all 0.5s ease;
            opacity: 0;
        }

        .nft-tier:hover {
            transform: translateY(-5px);
            border-color: rgba(124, 58, 237, 0.3);
        }

        .nft-tier:hover::before {
            animation: shimmer 0.5s ease;
        }

        @keyframes shimmer {
            0% {
                transform: rotate(45deg) translateX(-100%);
                opacity: 0;
            }
            50% {
                opacity: 1;
            }
            100% {
                transform: rotate(45deg) translateX(100%);
                opacity: 0;
            }
        }

        .tier-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .tier-name {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .tier-requirement {
            color: #8b8b9a;
        }

        .bronze { color: #cd7f32; }
        .silver { color: #c0c0c0; }
        .gold { color: #ffd700; }

        /* Stats Section */
        .stats-section {
            padding: 4rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #7c3aed, #a855f7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: #8b8b9a;
            font-size: 0.9rem;
        }

        /* Funders Section */
        .funders-section {
            padding: 4rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .funders-container {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 2rem;
            max-height: 400px;
            overflow-y: auto;
        }

        .funder-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .funder-row:hover {
            background: rgba(124, 58, 237, 0.1);
        }

        .funder-address {
            font-family: monospace;
            color: #a855f7;
        }

        .funder-amount {
            font-weight: 600;
        }

        /* Responsive */
        @media (max-width: 768px) {
            nav {
                padding: 1.5rem 2rem;
            }

            .nav-menu {
                display: none;
            }

            .hero {
                padding: 8rem 2rem 4rem;
            }

            .hero h1 {
                font-size: 2.5rem;
            }

            .floating-elements {
                display: none;
            }

            .features-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #7c3aed;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
        }

        ::-webkit-scrollbar-thumb {
            background: #7c3aed;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #6d28d9;
        }

        /* Dots Pattern */
        .dots-pattern {
            position: absolute;
            width: 100px;
            height: 100px;
            background-image: radial-gradient(circle, #7c3aed 1px, transparent 1px);
            background-size: 20px 20px;
            opacity: 0.1;
        }

        .dots-1 {
            top: 10%;
            left: 5%;
        }

        .dots-2 {
            bottom: 10%;
            right: 5%;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <div class="logo">BRABO</div>
            <div class="nav-menu">
                <a href="#home" class="nav-link">Home</a>
                <a href="#about" class="nav-link">About</a>
                <a href="#fund" class="nav-link">Fund</a>
                <a href="#nft" class="nav-link">NFTs</a>
                <button class="connect-wallet-btn" id="connectBtn">Connect</button>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="dots-pattern dots-1"></div>
        <div class="hero-content">
            <h1>Designing with balance, love and care.</h1>
            <p class="hero-subtitle">
                Support the BRABO project and earn exclusive rewards. Get 2x value in PICA tokens 
                and unlock upgradable NFTs as you contribute to our vision.
            </p>
            <button class="cta-button" onclick="scrollToFund()">
                Fund Project â†’
            </button>
        </div>

        <div class="floating-elements">
            <div class="blob blob1"></div>
            <div class="blob blob2"></div>
            
            <div class="floating-card card-funding">
                <div class="card-icon">ðŸ’Ž</div>
                <div class="card-title">Total Raised</div>
                <div class="card-value" id="totalRaisedCard">0 ETH</div>
            </div>

            <div class="floating-card card-nft">
                <div class="card-icon">ðŸŽ¨</div>
                <div class="card-title">NFTs Minted</div>
                <div class="card-value" id="nftsMinted">0</div>
            </div>

            <div class="floating-card card-rewards">
                <div class="card-icon">ðŸª™</div>
                <div class="card-title">PICA Available</div>
                <div class="card-value" id="picaAvailable">0</div>
            </div>
        </div>
    </section>

    <!-- Features -->
    <section class="features" id="about">
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">ðŸš€</div>
                <h3 class="feature-title">Instant Rewards</h3>
                <p class="feature-description">
                    Receive PICA tokens instantly when you fund. Get 2x the USD value of your 
                    contribution in tokens automatically.
                </p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ðŸŽ¨</div>
                <h3 class="feature-title">Exclusive NFTs</h3>
                <p class="feature-description">
                    Unlock unique NFTs at $10+ contribution. Your NFT automatically upgrades 
                    as you reach new funding tiers.
                </p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">âš¡</div>
                <h3 class="feature-title">Tier System</h3>
                <p class="feature-description">
                    Progress through Bronze, Silver, and Gold tiers. Each tier unlocks new 
                    benefits and exclusive artwork.
                </p>
            </div>
        </div>
    </section>

    <!-- Fund Section -->
    <section class="fund-section" id="fund">
        <div class="fund-container">
            <h2 style="font-size: 2rem; margin-bottom: 2rem; text-align: center;">Fund the Project</h2>
            
            <div class="input-wrapper">
                <label class="input-label">Amount to contribute (ETH)</label>
                <input type="number" class="eth-input" id="ethAmount" placeholder="0.0" step="0.001" min="0.001">
            </div>

            <div class="preview-card" id="rewardsPreview" style="display: none;">
                <div class="preview-item">
                    <span>You will receive</span>
                    <span class="preview-value" id="picaReward">0 PICA</span>
                </div>
                <div class="preview-item">
                    <span>USD Value</span>
                    <span class="preview-value" id="usdValue">$0</span>
                </div>
                <div class="preview-item">
                    <span>NFT Status</span>
                    <span class="preview-value" id="nftPreview">-</span>
                </div>
            </div>

            <button class="cta-button" id="fundBtn" style="width: 100%; justify-content: center;" disabled>
                Connect Wallet to Fund
            </button>
        </div>
    </section>

    <!-- NFT Showcase -->
    <section class="nft-showcase" id="nft">
        <h2 style="font-size: 2.5rem; margin-bottom: 1rem;">Exclusive NFT Tiers</h2>
        <p style="color: #8b8b9a; margin-bottom: 3rem;">
            Your NFT evolves with your contribution level
        </p>

        <div class="nft-tiers">
            <div class="nft-tier" id="bronzeTier">
                <div class="tier-icon bronze">ðŸ¥‰</div>
                <h3 class="tier-name">Bronze</h3>
                <p class="tier-requirement">$10+ contribution</p>
            </div>
            <div class="nft-tier" id="silverTier">
                <div class="tier-icon silver">ðŸ¥ˆ</div>
                <h3 class="tier-name">Silver</h3>
                <p class="tier-requirement">$100+ contribution</p>
            </div>
            <div class="nft-tier" id="goldTier">
                <div class="tier-icon gold">ðŸ¥‡</div>
                <h3 class="tier-name">Gold</h3>
                <p class="tier-requirement">$1000+ contribution</p>
            </div>
        </div>
    </section>

    <!-- Stats -->
    <section class="stats-section">
        <div class="stats-grid">
            <div class="stat-item">
                <div class="stat-number" id="totalFunders">0</div>
                <div class="stat-label">Total Funders</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="totalRaised">0 ETH</div>
                <div class="stat-label">Total Raised</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="userContribution">$0</div>
                <div class="stat-label">Your Contribution</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="currentTier">-</div>
                <div class="stat-label">Your Tier</div>
            </div>
        </div>
    </section>

    <!-- Funders List -->
    <section class="funders-section">
        <h2 style="font-size: 2rem; margin-bottom: 2rem; text-align: center;">Top Contributors</h2>
        <div class="funders-container" id="fundersList">
            <p style="text-align: center; color: #8b8b9a;">No contributors yet. Be the first!</p>
        </div>
    </section>

    <div class="dots-pattern dots-2"></div>

    <script>
        // Contract addresses and ABI (you'll need to update these)
        const FUNDME_ADDRESS = "YOUR_FUNDME_CONTRACT_ADDRESS";
        const NFT_ADDRESS = "YOUR_NFT_CONTRACT_ADDRESS";
        const PICA_TOKEN_ADDRESS = "YOUR_PICA_TOKEN_ADDRESS";

        // Simplified ABIs
        const FUNDME_ABI = [
            "function fund() payable",
            "function getHowMuchDudeFundedInUsd(address) view returns (uint256)",
            "function getHowMuchDudeFundedInUsdActual(address) view returns (uint256)",
            "function getFunders(uint256) view returns (address)",
            "function getPicaTokenBalance() view returns (uint256)",
            "function calculatePicaTokenReward(uint256) view returns (uint256)",
            "event Funded(address indexed funder, uint256 ethAmount, uint256 picaTokensAwarded)",
            "event NftMinted(address indexed recipient)",
            "event TierUpgraded(address indexed user, uint256 totalFundingUsd)"
        ];

        const NFT_ABI = [
            "function getTotalSupply() view returns (uint256)",
            "function getTokenIdByOwner(address) view returns (uint256)"
        ];

        let provider, signer, fundMeContract, nftContract, userAddress;

        // Smooth scroll
        function scrollToFund() {
            document.getElementById('fund').scrollIntoView({ behavior: 'smooth' });
        }

        // Connect wallet
        async function connectWallet() {
            try {
                if (typeof window.ethereum === 'undefined') {
                    alert('Please install MetaMask!');
                    return;
                }

                await window.ethereum.request({ method: 'eth_requestAccounts' });
                provider = new ethers.providers.Web3Provider(window.ethereum);
                signer = provider.getSigner();
                userAddress = await signer.getAddress();

                // Update button
                document.getElementById('connectBtn').textContent = 
                    userAddress.slice(0, 4) + '...' + userAddress.slice(-4);
                document.getElementById('connectBtn').classList.add('connected');

                // Initialize contracts
                fundMeContract = new ethers.Contract(FUNDME_ADDRESS, FUNDME_ABI, signer);
                nftContract = new ethers.Contract(NFT_ADDRESS, NFT_ABI, signer);

                // Enable fund button
                document.getElementById('fundBtn').textContent = 'Fund Project';
                document.getElementById('fundBtn').disabled = false;

                // Load data
                await loadUserData();
                await loadContractData();

                // Listen to events
                listenToEvents();

            } catch (error) {
                console.error('Error connecting wallet:', error);
                alert('Error connecting wallet. Please try again.');
            }
        }

        // Disconnect wallet
        async function disconnectWallet() {
            userAddress = null;
            document.getElementById('connectBtn').textContent = 'Connect';
            document.getElementById('connectBtn').classList.remove('connected');
            document.getElementById('fundBtn').textContent = 'Connect Wallet to Fund';
            document.getElementById('fundBtn').disabled = true;
            document.getElementById('userContribution').textContent = '$0';
            document.getElementById('currentTier').textContent = '-';
            updateTierHighlight(0);
        }

        // Load user data
        async function loadUserData() {
            try {
                const contribution = await fundMeContract.getHowMuchDudeFundedInUsdActual(userAddress);
                const contributionNum = contribution.toNumber();
                
                document.getElementById('userContribution').textContent = '$' + contributionNum;
                
                // Update tier
                let tier = '-';
                if (contributionNum >= 1000) {
                    tier = 'Gold';
                } else if (contributionNum >= 100) {
                    tier = 'Silver';
                } else if (contributionNum >= 10) {
                    tier = 'Bronze';
                }
                document.getElementById('currentTier').textContent = tier;
                
                updateTierHighlight(contributionNum);

            } catch (error) {
                console.error('Error loading user data:', error);
            }
        }

        // Load contract data
        async function loadContractData() {
            try {
                // Get PICA balance
                const picaBalance = await fundMeContract.getPicaTokenBalance();
                document.getElementById('picaAvailable').textContent = 
                    ethers.utils.formatEther(picaBalance).slice(0, 8);

                // Get total raised
                const contractBalance = await provider.getBalance(FUNDME_ADDRESS);
                const ethAmount = ethers.utils.formatEther(contractBalance).slice(0, 6);
                document.getElementById('totalRaised').textContent = ethAmount + ' ETH';
                document.getElementById('totalRaisedCard').textContent = ethAmount + ' ETH';

                // Get NFT count
                try {
                    const nftCount = await nftContract.getTotalSupply();
                    document.getElementById('nftsMinted').textContent = nftCount.toString();
                } catch (e) {
                    document.getElementById('nftsMinted').textContent = '0';
                }

                // Load funders
                await loadFundersList();

            } catch (error) {
                console.error('Error loading contract data:', error);
            }
        }

        // Load funders list
        async function loadFundersList() {
            try {
                const fundersList = document.getElementById('fundersList');
                fundersList.innerHTML = '';

                // Get funding events
                const filter = fundMeContract.filters.Funded();
                const events = await fundMeContract.queryFilter(filter, -10000);

                if (events.length === 0) {
                    fundersList.innerHTML = '<p style="text-align: center; color: #8b8
                }b9a;">No contributors yet. Be the first!</p>';
                    return;
                }       